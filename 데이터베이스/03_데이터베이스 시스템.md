# 3장. 데이터베이스 시스템
## 2022.07.09

## 학습목표
 - 데이터베이스, 데이터베이스 관리 시스템, 데이터베이스 시스템의 차이를 이해한다.
 - 데이터베이스 시스템의 구성 요소를 살펴본다.
 - DB 3단계 구조(외부, 개념, 내부)에서 데이터 독립성의 개념을 실현하는 방법을 이해한다.
 - 데이터 언어별 특징을 알아본다.
 - DB 사용자별 특징을 알아본다.
 - DBMS의 구성을 알아본다.
---
## 데이터베이스 시스템의 정의
### 데이터베이스 시스템(DBS) = 데이터베이스 + DBMS + 데이터언어 + 사용자
 - 데이터베이스에 뎅이터를 저장하고 이를 관리하여 조직에 필요한 정보를 생성해주는 시스템
---
## 데이터베이스의 구조
### 스키마와 인스턴스
 - 스키마 : 데이터베이스에 저장되는 데이터 구조와 제약조건을 정의한 것 ex) 이름 CHAR(10), 나이 INT
 - 인스턴스 : 스키마에 따라 데이터베이스에 실제로 저장된 값
 ![image](https://user-images.githubusercontent.com/97611103/178096554-b10a3853-eb1b-4e1c-879e-18ab15716269.png)

### 3단계 데이터베이스 구조
 - 데이터베이스를 쉽게 이해하고 이용할 수 있도록 하나의 DB를 **관점**에 따라 **3단계**로 나눈 것
	- 외부 단계(=view) : **개별 사용자** 관점 ex) 집주인
		- 자신이 필요한 속성(이름,주소 연락처 등)에 대해서만 관심이 있다.
	- 개념 단계 : **조직 전체**의 관점 ex) 관리인
		- 우리가 흔히 생각하는 스키마!
	- 내부 단계 : **물리적인 저장 장치**의 관점 ex) 건설업체
		- 필드이름, 필드 크기, OFFSET, 인덱스 등 아주 상세함.
 - 각 단계별로 다른 **추상화** 제공
	- 내부 -> 개념 -> 외부 순으로 추상화 레벨이 높아짐

#### 3단계 데이터베이스 구조 : 외부단계
 - DB를 **개별 사용자 관점**에서 이해하고 표현하는 단계
 - DB 하나에 외부 스키마가 여러개 존재할 수 있음.
	- **서브 스키마(sub schema)** 라고도 함

#### 3단계 데이터베이스 구조 : 개념단계
 - DB를 조직 전체의 관점에서 이해하고 표현하는 단계
 - DB하나에 개념 스키마가 하나만 존재한다.
	- 전체 DB에 어떤 데이터가 저장되나?
	- 데이터들 간에는 어떤 관계가 존재?
	- 데이터에 대한 보안정책 & 접근 권한에 대한 정의

#### 3단계 데이터베이스 구조 : 내부단계
 - DB를 저장 장치의 관점에서 이해하고 표현하는 단계
 - DB하나에 개념 스키마가 하나만 존재한다.
	- 전체 DB가 저장 장치에 실제로 저장되는 방법을 정의
	- 레코드 구조, 필드 크기, 레코드 접근 경로 등 물리적 저장구조를 정의
![image](https://user-images.githubusercontent.com/97611103/178097177-be43d6cd-0862-460c-9ad0-de45155ee7f9.png)

### 3단계 DB구조의 사상 또는 매핑
#### 스키마 사이의 대응관계
 - 외부/개념 사상 : 외부 스키마와 개념 스키마의 대응관계
	- **응용 인터페이스**라고도 함
 - 개념/내부 사상 : 개념 스키마와 내부 스키마의 대응관계
	- **저장 인터페이스**라고도 함
#### ✔ 미리 정의된 사상 정보를 이용하여 사용자가 원하는 데이터에 접근
 👉데이터 독립성의 실현!!

### 데이터 독립성
 - 하위 스키마를 변경하더라도 상위 스키마가 영향을 받지 않음
 - 논리적 데이터 독립성(외부:개념)
	- 개념스키마가 변경되어도 외부 스키마는 영향을 받지 않음
	- 개념스키마가 변경되면 관련된 외부/개념 사상만 정확하게 수정하면 된다.
- 논리적 데이터 독립성(개념:내부)
	- 내부스키마가 변경되어도 개념 스키마는 영향을 받지 않음
	- 내부스키마가 변경되면 관련된 개념/내부 사상만 정확하게 수정하면 된다.
 👉데이터 독립성을 실현하기 위해서 데이터의 구조를 3단계로 나누어서 관리한다.

### 데이터 사전(Data Dictionary)
 - 시스템 카탈로그라고도 함.
 - 메타 데이터를 유지하는 시스템 데이터베이스
 - 스키마, 사상정보, 다양한 제약조건 등을 저장
 - DBMS가 스스로 생성하고 유지함
 - 일반 사용자도 접근은 가능하지만 조회만 O 수정 X

### 데이터 디렉토리(Data Directory)
 - 데이터 사전에 있는 데이터에 실제로 접근하는데 필요한 위치 정보를 저장하는 System DB
 - 일반 사용자의 접근은 허용되지 않음

### 사용자 데이터베이스(User Database)
 - 사용자가 실제로 이용하는 데이터가 저장되어 있는 일반 DB
---
## 데이터베이스 사용자
 - 데이터베이스를 이용하기 위해 접근하는 모든 사람
	 - 데이터베이스 관리자(DBA) : 데이터베이스 시스템을 운영하고 관리

	 - 최종 사용자(=일반 사용자) : DB에 접근하여 데이터를 조작한다.

	 - 응용 프로그래머 : 데이터 언어를 삽입하여 응용프로그램을 작성한다.

### 데이터베이스 관리자
 - 주로 데이터 정의어(DDL)와 데이터 제어어(DCL)를 사용
 - 주요업무
	- DB 구성요소 선정
	- DB 스키마 정의
	- 무결성 유지를 위한 제약조건 정의
	- 보안 및 접근 권한 정책 결정
	- 시스템 데이터베이스 관리
	- 데이터베이스 재구성 등

### 최종 사용자
 - DB에 접근하여 데이터를 조작(DML - CRUD) 하는 사람
 - 캐주얼 사용자와 초보 사용자로 구분

### 응용 프로그래머
 - 데이터 언어를 삽입하여 응용 프로그램을 작성하는 사람
 - 주로 데이터 조작어(DML)를 사용
---
## 데이터 언어
### 데이터 정의어(DDL)
 - 스키마를 정의하거나 수정 또는 삭제하기 위해서 사용한다.

### 데이터 조작어(DML)
 - CRUD 등의 처리를 요구하기 위해서 사용한다.
 #### 절차적 데이터 조작어
  - 사용자가 어떤 데이터를 원하나? + 얻기 위해 어떻게 처리해야 하나?
 #### 비절차적 데이터 조작어
  - 사용자가 어떤 데이터를 원하는지만 설명
  - 선언적 언어라고도 함

### 데이터 제어어(DCL)
 - 내부적으로 필요한 규칙이나 기법을 정의하기 위해서 사용한다.
 - 사용목적
	- 무결성 : 정확하고 유효한 데이터만 유지
	- 보안 : 허가받지 않은 사용자의 데이터 접근 차단
	- 회복 : 장애가 발생해도 데이터 일관성 유지
	- 동시성 제어 : 동시 공유 지원

---
## 데이터베이스 관리 시스템의 구성
### DBMS
 - DB관리와 사용자의 데이터 처리 요구 수행
 - 주요 구성 요소
	- 질의 처리기(query processor)
		- 사용자의 데이터 처리 요구를 해석하여 처리
		- DDL컴파일러, DML 프리 컴파일러 등 포함
	- 저장 데이터 관리자(stored data manager)
		- 디스크에 저장된 사용자 DB와 데이터 사전을 관리하고, 여기에 실제로 접근하는 역할을 담당
![image](https://user-images.githubusercontent.com/97611103/178098114-83efeebc-cdac-440c-abb7-dcb01478913c.png)
	